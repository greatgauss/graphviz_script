digraph abc{
node [shape = record, fontname = Microsoft YaHei, fontsize = 20];

     A	[ label = "pthread_create()" ];
     B	[ label = "__thread_entry()" ];
     C	[ label = "DASHReceiver::DoBuffering()" ];
	   D[ label = <
			<TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0" CELLPADDING="4">
			  <TR> <TD COLSPAN="4" port="DownloadInitSegment">DASHReceiver::DownloadInitSegment()</TD> </TR>
			  <TR> <TD COLSPAN="4">DASHReceiver::GetNextSegment()</TD> </TR>
			  <TR> <TD COLSPAN="4">WHILE( true )</TD> </TR>
			  <TR> <TD  COLSPAN="1" ROWSPAN="6"></TD> </TR>
			  <TR> <TD  COLSPAN="3"  PORT="f1">MediaObject::StartDownload()</TD> </TR>
			  <TR> <TD  COLSPAN="3">MediaObjectBuffer::PushBack()</TD> </TR>
			  <TR> <TD  COLSPAN="3">MediaObject::WaitFinished()</TD> </TR>
			  <TR> <TD  COLSPAN="3">DASHReceiver::NotifySegmentDownloaded()</TD> </TR>
			  <TR> <TD  COLSPAN="3">DASHReceiver::GetNextSegment()</TD> </TR>
			</TABLE>
		 >, shape=plaintext ];
     E	[ label = "MediaObject::StartDownload()" ];
     F	[ label = "{<f0>AbstractChunk::AttachDownloadObserver()| \
                    <f1>AbstractChunk::StartDownload()}" ];

    
		 A -> B -> C -> D;
		 D:DownloadInitSegment:e -> E-> F;
		      
     1	[ label = "pthread_create()" ];
     2	[ label = "__thread_entry()" ];
     3	[ label = "amthreadpool_start_thread()" ];
     4	[ label = "//libamplayer.so\n//amplayer/player/player.c\nplayer_thread()" ];
     5	[ label = "ffmpeg_open_file()" ];
     6	[ label = "avformat_open_input_header()" ];
     7	[ label = "avio_open_h()" ];
     8	[ label = "ffurl_open_h()" ];
     9	[ label = "dash_protocol_open()" ];
     10	[ label = "dash_open()" ];
    11 [ label = "{<f0>CreateDashManager()| \
                 <f1>DASHManager::Open()| \
                 <f2>//One session per AdaptationSet\n dash_open_session()}" ];

    12 [ label = "{<f0>new DASHManager2| \
                 <f1>DASHManager2::SetRepresentation()| \
                 <f2>DASHManager2::Start()}" ];

    13	[ label = "new DASHReceiver" ];
    14	[ label = "new AdaptationSetStream", fontcolor= RED ];
    15	[ label = "AdaptationSetStream::Initialize()" ];
    16	[ label = "RepresentationStreamFactory::Create()" ];
    17	[ label = "new SegmentTemplateStream" ];
    18	[ label = "SegmentTemplateStream::CalculateSegmentStartTimes()" ];

    19 [ label = "{<f0>new AdaptationSetStream|<f1>DASHReceiver::DownloadInitSegment()}", fontcolor= RED ];
    20 [ label = "{<f0>DASHReceiver::GetInitSegment()|<f1>MediaObject::StartDownload()}" ];
    21 [ label = "AbstractChunk::StartDownload()" ];

    22 [ label = "DASHReceiver::Start()" ];
    23 [ label = "pthread_create(DASHReceiver::DoBuffering())" ];

    24 [ label = "DOMParser::Parse()" ];
    25 [ label = "// Download MPD\nAbstractChunk::StartDownload()" ];
            
            
1 -> 2 -> 3 -> 4 -> 5 -> 6 -> 9 -> 10 -> 11;
6 -> 7 -> 8 -> 9

11:f1 -> 24 -> 25
11:f2:w -> 12;
12:f0 ->13 -> 14 -> 15 -> 16 -> 17 -> 18
12:f1 -> 19 -> 20 -> 21
12:f2 -> 22 -> 23

}
